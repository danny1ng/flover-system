# Migration `20201114160400-incoming-goods`

This migration has been generated by dannying at 11/14/2020, 7:04:00 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "IncomingGood" (
"id" SERIAL,
    "name" TEXT NOT NULL,
    "count" DECIMAL(65,30) NOT NULL DEFAULT 1,
    "storeId" INTEGER NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "IncomingGood" ADD FOREIGN KEY("storeId")REFERENCES "Store"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201114160400-incoming-goods
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,79 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Store {
+  id           Int            @id @default(autoincrement())
+  name         String
+  products     Product[]
+  balance      Int            @default(0)
+  users        User[]         @relation(references: [id])
+  deduction    Deduction[]
+  sale         Sale[]
+  IncomingGood IncomingGood[]
+}
+
+model User {
+  id       Int     @id @default(autoincrement())
+  password String  @default("")
+  name     String  @unique
+  stores   Store[]
+  role     Role    @default(SELLER)
+}
+
+model Product {
+  id      Int    @id @default(autoincrement())
+  name    String
+  count   Float  @default(1)
+  store   Store  @relation(fields: [storeId], references: [id])
+  storeId Int
+  price   Int
+  sale    Sale[]
+}
+
+model IncomingGood {
+  id        Int      @id @default(autoincrement())
+  name      String
+  count     Float    @default(1)
+  store     Store    @relation(fields: [storeId], references: [id])
+  storeId   Int
+  createdAt DateTime
+}
+
+model Sale {
+  id        Int      @id @default(autoincrement())
+  product   Product  @relation(fields: [productId], references: [id])
+  productId Int
+  store     Store    @relation(fields: [storeId], references: [id])
+  storeId   Int
+  count     Int
+  summary   Int
+  discount  Int      @default(0)
+  note      String?
+  payType   PayType  @default(CASH)
+  createdAt DateTime @default(now())
+}
+
+model Deduction {
+  id        Int      @id @default(autoincrement())
+  message   String
+  summary   Int
+  store     Store    @relation(fields: [storeId], references: [id])
+  storeId   Int
+  createdAt DateTime @default(now())
+}
+
+enum Role {
+  ADMIN
+  SELLER
+}
+
+enum PayType {
+  CASH
+  WIRE
+}
```


