# Migration `20201108190854-current`

This migration has been generated by dannying at 11/8/2020, 10:08:54 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql

```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201018180222-add-deduction-models..20201108190854-current
--- datamodel.dml
+++ datamodel.dml
@@ -1,27 +1,30 @@
 generator client {
   provider = "prisma-client-js"
+  previewFeatures = ["transactionApi"]
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Store {
-  id       Int       @id @default(autoincrement())
-  name     String
-  products Product[]
-  balance  Int       @default(0)
-  users    User[]    @relation(references: [id])
+  id        Int         @id @default(autoincrement())
+  name      String
+  products  Product[]
+  balance   Int         @default(0)
+  users     User[]      @relation(references: [id])
+  deduction Deduction[]
+  sale      Sale[]
 }
 model User {
   id       Int     @id @default(autoincrement())
   password String  @default("")
   name     String  @unique
   stores   Store[]
-  role     Role    @default(SALLER)
+  role     Role    @default(SELLER)
 }
 model Product {
   id      Int    @id @default(autoincrement())
@@ -29,29 +32,33 @@
   count   Float  @default(1)
   store   Store  @relation(fields: [storeId], references: [id])
   storeId Int
   price   Int
-  Sale    Sale[]
+  sale    Sale[]
 }
 model Sale {
   id        Int      @id @default(autoincrement())
   product   Product  @relation(fields: [productId], references: [id])
   productId Int
+  store     Store    @relation(fields: [storeId], references: [id])
+  storeId   Int
   count     Int
-  discount  Int?
   summary   Int
+  discount  Int      @default(0)
   note      String?
   createdAt DateTime @default(now())
 }
 model Deduction {
-  id      Int    @id @default(autoincrement())
-  message String
-  summary Int
-
+  id        Int      @id @default(autoincrement())
+  message   String
+  summary   Int
+  store     Store    @relation(fields: [storeId], references: [id])
+  storeId   Int
+  createdAt DateTime @default(now())
 }
 enum Role {
   ADMIN
-  SALLER
+  SELLER
 }
```


